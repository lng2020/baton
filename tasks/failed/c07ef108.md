# Wire plans through dashboard connector and server routes

type: feature

Add plan support to the dashboard layer so the UI can access plans via the dashboard API:

1. **Update `ProjectConnector` ABC** in `backend/connectors/base.py`:
   - `list_plans(status: str | None = None) -> list[PlanSummary]`
   - `read_plan(status: str, filename: str) -> PlanDetail | None`
   - `create_plan(title, summary, content) -> PlanDetail`
   - `start_plan(plan_id: str) -> dict` (triggers orchestration)
   - `get_all_plans() -> dict[str, list[PlanSummary]]`

2. **Implement in `HTTPConnector`** (`backend/connectors/http.py`):
   - `list_plans` → `GET /agent/plans` or `GET /agent/plans/{status}`
   - `read_plan` → `GET /agent/plans/{status}/{filename}`
   - `create_plan` → `POST /agent/plans`
   - `start_plan` → `POST /agent/plans/{plan_id}/start`
   - `get_all_plans` → `GET /agent/plans`
   - Follow the same graceful degradation pattern (return empty on connection failure)

3. **Implement in `LocalConnector`** (`backend/connectors/local.py`):
   - Implement file-based plan CRUD (same pattern as task methods)
   - `start_plan` can raise `NotImplementedError` (requires agent)

4. **Add dashboard API routes** in `backend/server.py`:
   - `GET /api/projects/{project_id}/plans` — all plans grouped by status
   - `GET /api/projects/{project_id}/plans/{status}/{filename}` — plan detail
   - `POST /api/projects/{project_id}/plans` — create plan
   - `POST /api/projects/{project_id}/plans/{plan_id}/start` — start plan execution

5. **Update `ProjectSummary`** in `backend/models.py` to include `plan_counts: dict[str, int]`.

6. **Update `api_projects` endpoint** in `backend/server.py` to include plan counts alongside task counts.

7. Import the new models (`PlanSummary`, `PlanDetail`, `PlanCreateRequest`) wherever needed.