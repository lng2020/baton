# Update chat flow to save plans to plans/ instead of creating tasks directly

type: feature

Modify the existing chat->plan->tasks flow so that when the planning Claude proposes a plan, clicking 'Create Plan' saves it as a plan file instead of immediately creating tasks:

1. **Update the chat system prompt** in `backend/chat.py` (the `SYSTEM_PROMPT` constant):
   - Keep the existing behavior: Claude researches the codebase and proposes a structured plan
   - The JSON output format stays the same: `{plan: true, summary: '...', tasks: [...]}`
   - This is fine because the plan content IS the structured breakdown; the orchestrator will later refine it into actual tasks

2. **Update `confirmPlan()` in `frontend/js/app.js`** (around line 532):
   - Instead of calling `/api/projects/{id}/tasks/bulk`, call `POST /api/projects/{id}/plans`
   - Send: `{title: plan.summary.slice(0,80), summary: plan.summary, content: JSON.stringify(plan)}`
   - The plan content stores the full plan JSON (summary + tasks array)
   - After successful creation, show a success message and refresh the plans board
   - Rename the button from 'Create Tasks' to 'Save Plan'

3. **Update the plan display section** in `frontend/index.html` (lines 42-52):
   - Change button text: 'Create Tasks' â†’ 'Save Plan'
   - Keep 'Continue Discussion' button as-is

4. **Update `resetChat()` function** to also clear plan state appropriately after saving.